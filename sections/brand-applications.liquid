{% comment %}
  ============================================
  BRAND APPLICATIONS v1.2
  ============================================
  Dark section with overlay image cards
  Dramatic gradient overlays for depth
  Trade 15.4.0 Compatible
  ============================================
{% endcomment %}

{{ 'brand-page.css' | asset_url | stylesheet_tag }}

<section class="brand-applications" id="applications-{{ section.id }}">
  <div class="page-width">

    {%- comment -%} Section Header {%- endcomment -%}
    <div class="brand-applications__header">
      {%- if section.settings.section_label != blank -%}
        <span class="brand-applications__label">
          <span class="brand-applications__label-dash"></span>
          {{ section.settings.section_label }}
        </span>
      {%- endif -%}
      {%- if section.settings.title != blank -%}
        <h2 class="brand-applications__title">{{ section.settings.title }}</h2>
      {%- endif -%}
      {%- if section.settings.subtitle != blank -%}
        <p class="brand-applications__subtitle">{{ section.settings.subtitle }}</p>
      {%- endif -%}
    </div>

    {%- comment -%} Applications Grid {%- endcomment -%}
    <div class="brand-applications__grid">
      {%- for block in section.blocks -%}
        {%- if block.type == 'application' -%}
          {%- liquid
            assign card_class = 'brand-applications__card'
            if block.settings.featured
              assign card_class = card_class | append: ' brand-applications__card--featured'
            endif
          -%}
          <div class="{{ card_class }}" {{ block.shopify_attributes }}>

            {%- comment -%} Image with Overlay {%- endcomment -%}
            <div class="brand-applications__card-image">
              {%- if block.settings.image != blank -%}
                <img
                  src="{{ block.settings.image | image_url: width: 800 }}"
                  srcset="{{ block.settings.image | image_url: width: 400 }} 400w,
                          {{ block.settings.image | image_url: width: 600 }} 600w,
                          {{ block.settings.image | image_url: width: 800 }} 800w"
                  sizes="(max-width: 749px) 100vw, {% if block.settings.featured %}66vw{% else %}33vw{% endif %}"
                  alt="{{ block.settings.image.alt | default: block.settings.title }}"
                  loading="lazy"
                  width="800"
                  height="600"
                  class="brand-applications__img"
                >
              {%- else -%}
                <div class="brand-applications__placeholder">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" aria-hidden="true">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <polyline points="21 15 16 10 5 21"/>
                  </svg>
                </div>
              {%- endif -%}

              {%- comment -%} Gradient Overlay with Content {%- endcomment -%}
              <div class="brand-applications__overlay">
                <div class="brand-applications__overlay-content">
                  {%- if block.settings.title != blank -%}
                    <h3 class="brand-applications__card-title">{{ block.settings.title }}</h3>
                  {%- endif -%}
                  {%- if block.settings.description != blank -%}
                    <p class="brand-applications__card-desc">{{ block.settings.description }}</p>
                  {%- endif -%}
                  {%- if block.settings.connector_used != blank -%}
                    <span class="brand-applications__connector">
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                      </svg>
                      {{ block.settings.connector_used }}
                    </span>
                  {%- endif -%}
                </div>
              </div>
            </div>

          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    {%- comment -%} Bottom CTA {%- endcomment -%}
    {%- if section.settings.cta_text != blank and section.settings.cta_url != blank -%}
      <div class="brand-applications__cta">
        <a href="{{ section.settings.cta_url }}" class="brand-applications__btn">
          {{ section.settings.cta_text }}
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" aria-hidden="true">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      </div>
    {%- endif -%}

  </div>
</section>

{% schema %}
{
  "name": "Brand Applications",
  "tag": "section",
  "class": "section-brand-applications",
  "max_blocks": 6,
  "settings": [
    {
      "type": "text",
      "id": "section_label",
      "label": "Section Label",
      "default": "Real World Applications"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Who Uses Lamello?"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "From bespoke furniture makers to large-scale commercial projects"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "View All Products"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "Button URL"
    }
  ],
  "blocks": [
    {
      "type": "application",
      "name": "Application",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "checkbox",
          "id": "featured",
          "label": "Featured (larger card)",
          "default": false
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Kitchen Fitting"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Fast carcass assembly with invisible connections."
        },
        {
          "type": "text",
          "id": "connector_used",
          "label": "Connector Used",
          "info": "Optional - shows which Lamello system was used",
          "default": "Cabineo 12"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Brand Applications",
      "blocks": [
        {
          "type": "application",
          "settings": {
            "featured": true,
            "title": "Commercial Furniture",
            "description": "Hüba in Lucerne used over 30,000 Clamex connectors for their tubular metal furniture system — saving 25% assembly time.",
            "connector_used": "Clamex P-14 Flexus"
          }
        },
        {
          "type": "application",
          "settings": {
            "title": "Kitchen Fitting",
            "description": "Fast carcass assembly with invisible connections.",
            "connector_used": "Cabineo 12"
          }
        },
        {
          "type": "application",
          "settings": {
            "title": "Bespoke Furniture",
            "description": "STORY Design Amsterdam creates sustainable flat-pack furniture.",
            "connector_used": "Clamex P-14"
          }
        },
        {
          "type": "application",
          "settings": {
            "title": "Shop Fitting",
            "description": "Retail displays that can be assembled and reconfigured.",
            "connector_used": "Clamex P-10"
          }
        },
        {
          "type": "application",
          "settings": {
            "title": "Cabinet Making",
            "description": "Traditional joinery with modern efficiency.",
            "connector_used": "Zeta P2"
          }
        }
      ]
    }
  ]
}
{% endschema %}