{% comment %}
  Quote Modal Snippet
  ===================
  Reusable quote request modal for product pages.

  Usage: {% render 'quote-modal', product: product %}

  Version: 1.0.0
  Author: Invicta Tools Theme
{% endcomment %}

{%- liquid
  assign current_variant = product.selected_or_first_available_variant
-%}

<!-- Quote Request Modal -->
<div
  class="invicta-quote-modal"
  data-quote-modal
  role="dialog"
  aria-label="Request a quote" aria-modal="true"
  aria-labelledby="QuoteModalTitle"
  hidden
>
  <div class="invicta-quote-modal__backdrop" data-quote-close></div>

  <div class="invicta-quote-modal__content">
    <div class="invicta-quote-modal__header">
      <h2 id="QuoteModalTitle" class="invicta-quote-modal__title">Request a Quote</h2>
      <button
        type="button"
        class="invicta-quote-modal__close"
        data-quote-close
        aria-label="Close quote request"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="invicta-quote-modal__body">
      <form
        action="/contact#contact_form"
        method="post"
        class="invicta-quote-form"
        data-quote-form
      >
        <input type="hidden" name="form_type" value="contact">
        <input type="hidden" name="utf8" value="âœ“">

        <!-- Product Info (auto-filled) -->
        <input type="hidden" name="contact[product_title]" value="{{ product.title | escape }}" data-quote-product-title>
        <input type="hidden" name="contact[product_sku]" value="{{ current_variant.sku }}" data-quote-product-sku>
        <input type="hidden" name="contact[product_url]" value="{{ shop.url }}{{ product.url }}" data-quote-product-url>
        <input type="hidden" name="contact[subject]" value="Quote Request: {{ product.title | escape }}">

        <div class="invicta-quote-form__product-info">
          <strong>{{ product.title | escape }}</strong>
          {% if current_variant.sku != blank %}
            <span class="invicta-quote-form__sku">SKU: {{ current_variant.sku }}</span>
          {% endif %}
        </div>

        <div class="invicta-quote-form__row">
          <div class="invicta-quote-form__field">
            <label for="QuoteName">Your Name <span class="required">*</span></label>
            <input
              type="text"
              id="QuoteName"
              name="contact[name]"
              required
              autocomplete="name"
              placeholder="John Smith"
            >
          </div>

          <div class="invicta-quote-form__field">
            <label for="QuoteCompany">Company Name</label>
            <input
              type="text"
              id="QuoteCompany"
              name="contact[company]"
              autocomplete="organization"
              placeholder="Acme Ltd"
            >
          </div>
        </div>

        <div class="invicta-quote-form__row">
          <div class="invicta-quote-form__field">
            <label for="QuoteEmail">Email <span class="required">*</span></label>
            <input
              type="email"
              id="QuoteEmail"
              name="contact[email]"
              required
              autocomplete="email"
              placeholder="john@company.com"
            >
          </div>

          <div class="invicta-quote-form__field">
            <label for="QuotePhone">Phone</label>
            <input
              type="tel"
              id="QuotePhone"
              name="contact[phone]"
              autocomplete="tel"
              placeholder="01234 567890"
            >
          </div>
        </div>

        <div class="invicta-quote-form__field">
          <label for="QuoteQty">Quantity Required <span class="required">*</span></label>
          <input
            type="number"
            id="QuoteQty"
            name="contact[quantity]"
            required
            min="1"
            value="1"
            data-quote-qty
          >
        </div>

        <div class="invicta-quote-form__field">
          <label for="QuoteMessage">Additional Details</label>
          <textarea
            id="QuoteMessage"
            name="contact[body]"
            rows="4"
            placeholder="Delivery requirements, timeline, or any other details..."
          ></textarea>
        </div>

        <div class="invicta-quote-form__actions">
          <button type="button" class="invicta-quote-form__cancel" data-quote-close>
            Cancel
          </button>
          <button type="submit" class="invicta-quote-form__submit">
            <span>Submit Quote Request</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

{{ 'component-quote-modal.css' | asset_url | stylesheet_tag }}

<script src="{{ 'component-quote-modal.js' | asset_url }}" defer></script>
